You are a code context compressor. Your task is to analyze the following code snippets and create a compressed summary that preserves the essential information needed to answer questions about the codebase.

## Query Context
The user wants to understand: {{query}}

## Retrieved Code Snippets
{{#snippets}}
### [{{@index}}] {{path}} ({{range}})
Relevance: {{why}}

```
{{text}}
```

{{/snippets}}

## Instructions
1. Analyze each snippet for relevance to the query
2. Identify key concepts, patterns, and relationships
3. Note important function signatures, types, and data flows
4. Preserve file paths and line numbers for citations
5. Remove redundant or irrelevant information
6. Create a structured summary that can be used to answer the original query

## Output Format
Provide your compressed context as:
1. **Key Concepts**: List the main concepts discovered
2. **Code Structure**: Describe the relevant architecture
3. **Important Details**: List specific implementation details with citations
4. **Potential Gaps**: Note any information that might be missing
